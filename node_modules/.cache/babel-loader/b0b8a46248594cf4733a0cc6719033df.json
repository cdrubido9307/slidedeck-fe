{"ast":null,"code":"var _jsxFileName = \"/Users/tom/Documents/F21 COMP 523/repos/slidedeck-fe/src/views/Login.js\";\n// Import CSS\nimport \"./css/Auth.css\"; // Import major dependencies\n\nimport React, { useContext, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Helmet } from \"react-helmet-async\"; // Import components\n\nimport Banner from \"../components/Banner\";\nimport Button from \"../components/Button\";\nimport TextBox from \"../components/TextBox\";\nimport LoadSpinner from \"../components/LoadSpinner\";\nimport Auth from \"../components/Auth\"; // Import icons\n\nimport { FaUserAlt, FaLock, FaChevronRight } from \"react-icons/fa\"; // Import API\n\nimport api from \"../static/api\";\nimport storage from \"../static/storage\";\n\nconst Login = props => {\n  const AuthContext = useContext(Auth.Context);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [showError, setShowError] = useState(false);\n  const history = useHistory();\n\n  const onUsernameChange = e => {\n    let value = e.target.value;\n    setUsername(value);\n    setShowError(false);\n  };\n\n  const onPasswordChange = e => {\n    let value = e.target.value;\n    setPassword(value);\n    setShowError(false);\n  };\n\n  const handleLoginButton = () => {\n    setLoading(true);\n    const user = {\n      name: username,\n      password: password\n    };\n    api.put_login(user, onSuccess);\n  };\n\n  const onSuccess = data => {\n    console.log(data);\n    setLoading(false);\n\n    if (data.result) {\n      const newUser = {\n        name: username,\n        token: data.token\n      };\n      AuthContext.setUser(newUser);\n      history.push(\"/dashboard\");\n    } else {\n      AuthContext.setUser(undefined);\n      setShowError(true);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, \"Welcome\")), /*#__PURE__*/React.createElement(Banner, {\n    show: showError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, \"Invalid username/password. Please try again.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-background\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"Slidedeck logo\",\n    src: \"assets/slidedeck-logo.svg\",\n    className: \"w-52 light-logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"Slidedeck logo\",\n    src: \"assets/slidedeck-logo-w.svg\",\n    className: \"w-52 dark-logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(TextBox, {\n    icon: FaUserAlt,\n    className: \"w-full\",\n    type: \"text\",\n    placeholder: \"username\",\n    onChange: onUsernameChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(TextBox, {\n    icon: FaLock,\n    className: \"w-full\",\n    type: \"password\",\n    placeholder: \"password\",\n    onChange: onPasswordChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full flex justify-center items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(LoadSpinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 29\n    }\n  })) : /*#__PURE__*/React.createElement(Button, {\n    disabled: !username || !password,\n    className: \"special center w-full font-bold\",\n    icon: FaChevronRight,\n    onClick: handleLoginButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }, \"LOG IN\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sm underline text-theme hover:text-carolina cursor-pointer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, \"Forgot Password?\")))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/tom/Documents/F21 COMP 523/repos/slidedeck-fe/src/views/Login.js"],"names":["React","useContext","useState","useHistory","Helmet","Banner","Button","TextBox","LoadSpinner","Auth","FaUserAlt","FaLock","FaChevronRight","api","storage","Login","props","AuthContext","Context","username","setUsername","password","setPassword","loading","setLoading","showError","setShowError","history","onUsernameChange","e","value","target","onPasswordChange","handleLoginButton","user","name","put_login","onSuccess","data","console","log","result","newUser","token","setUser","push","undefined"],"mappings":"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","sourcesContent":["// Import CSS\nimport \"./css/Auth.css\";\n// Import major dependencies\nimport React, { useContext, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\"\nimport { Helmet } from \"react-helmet-async\";\n// Import components\nimport Banner from \"../components/Banner\";\nimport Button from \"../components/Button\";\nimport TextBox from \"../components/TextBox\";\nimport LoadSpinner from \"../components/LoadSpinner\";\nimport Auth from \"../components/Auth\";\n// Import icons\nimport { FaUserAlt, FaLock, FaChevronRight } from \"react-icons/fa\";\n// Import API\nimport api from \"../static/api\";\nimport storage from \"../static/storage\";\n\nconst Login = (props) => {\n\n    const AuthContext = useContext(Auth.Context);\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [loading, setLoading] = useState(false);\n    const [showError, setShowError] = useState(false);\n    const history = useHistory();\n\n    const onUsernameChange = (e) => {\n        let value = e.target.value;\n        setUsername(value);\n        setShowError(false);\n    }\n\n    const onPasswordChange = (e) => {\n        let value = e.target.value;\n        setPassword(value);\n        setShowError(false);\n    }\n\n    const handleLoginButton = () => {\n        setLoading(true);\n        const user = {\n            name: username,\n            password: password,\n        }\n        api.put_login(user, onSuccess);\n    }\n\n    const onSuccess = (data) => {\n        console.log(data);\n        setLoading(false);\n        if (data.result) {\n            const newUser = {\n                name: username,\n                token: data.token\n            }\n            AuthContext.setUser(newUser);\n            history.push(\"/dashboard\");\n        } else {\n            AuthContext.setUser(undefined);\n            setShowError(true);\n        }\n    }\n\n    return(\n        <>  \n            <Helmet>\n                <title>Welcome</title>\n            </Helmet>\n            <Banner show={showError}>\n                Invalid username/password. Please try again.\n            </Banner>\n            <div className=\"auth-background\">\n                <div className=\"auth-card\">\n                    <div className=\"h-12\"/>\n                    <div className=\"flex justify-center\">\n                        <img \n                            alt=\"Slidedeck logo\"\n                            src=\"assets/slidedeck-logo.svg\" \n                            className=\"w-52 light-logo\"\n                        />\n                        <img \n                            alt=\"Slidedeck logo\"\n                            src=\"assets/slidedeck-logo-w.svg\" \n                            className=\"w-52 dark-logo\"\n                        />\n                    </div>\n                    <div className=\"h-12\"/>\n                    <div className=\"h-4\"/>\n                    <TextBox \n                        icon={FaUserAlt}\n                        className=\"w-full\"\n                        type=\"text\"\n                        placeholder=\"username\" \n                        onChange={onUsernameChange}\n                    />\n                    <div className=\"h-2\"/>\n                    <TextBox \n                        icon={FaLock}\n                        className=\"w-full\"\n                        type=\"password\" \n                        placeholder=\"password\" \n                        onChange={onPasswordChange}\n                    />\n                    <div className=\"h-4\"/>\n                    {loading ? \n                        <div className=\"w-full flex justify-center items-center\">\n                            <LoadSpinner/>\n                        </div>\n                        :\n                        <Button \n                            disabled={!username || !password}  \n                            className=\"special center w-full font-bold\" \n                            icon={FaChevronRight}\n                            onClick={handleLoginButton}>\n                            LOG IN\n                        </Button>\n                    }\n                    <div className=\"h-4\"/>\n                    <div className=\"text-center\">\n                        <p className=\"text-sm underline text-theme hover:text-carolina cursor-pointer\">Forgot Password?</p>\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}